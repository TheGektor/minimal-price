# MinimalPrice

**MinimalPrice** ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–¥–æ–≤–æ–µ –∏ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–∫–æ–Ω–æ–º–∏–∫–æ–π –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö Minecraft. –í —É—Å–ª–æ–≤–∏—è—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—â–∏—Ö—Å—è –∏–≥—Ä–æ–≤—ã—Ö —ç–∫–æ–Ω–æ–º–∏–∫, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –∏–º–µ—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–µ–º–ø–∏–Ω–≥–∞ –∏ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –ù–∞—à –ø–ª–∞–≥–∏–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç—Ç–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

–í—ã —Å–º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∂–µ—Å—Ç–∫–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ —Ü–µ–Ω –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º —ç—Ç–∏–º —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä—è–º–æ –≤ –∏–≥—Ä–æ–≤–æ–º —á–∞—Ç–µ. –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä—è–¥–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –º–µ–Ω—é.

–û–¥–Ω–∞–∫–æ –Ω–∞—Å—Ç–æ—è—â–µ–π "–∫–∏–ª–ª–µ—Ä-—Ñ–∏—á–µ–π" —è–≤–ª—è–µ—Ç—Å—è –Ω–∞—à–∞ **–≥–ª—É–±–æ–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Discord**. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –±–æ—Ç–æ–≤, MinimalPrice –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Discord Forum Channels –Ω–∞ –ø–æ–ª–Ω—É—é –º–æ—â–Ω–æ—Å—Ç—å. –ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤, –ø—É–±–ª–∏–∫—É–µ—Ç –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Ü–µ–Ω –∏, —á—Ç–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–≥—Ä–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ï—Å–ª–∏ –≤—ã –º–µ–Ω—è–µ—Ç–µ —Ü–µ–Ω—É –Ω–∞ –∞–ª–º–∞–∑ –≤ –∏–≥—Ä–µ, –æ–Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ Discord, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –≤–∞—à–∏ –∏–≥—Ä–æ–∫–∏ –≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –¥–∞–∂–µ –Ω–∞—Ö–æ–¥—è—Å—å –æ—Ñ—Ñ–ª–∞–π–Ω. –ú—ã –ø–æ–∑–∞–±–æ—Ç–∏–ª–∏—Å—å –∏ –æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª—è—Ö: –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞, –æ–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (Rate Limits) Discord API –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–µ–ª–∞—é—Ç —Ä–∞–±–æ—Ç—É –ø–ª–∞–≥–∏–Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ —Ç–æ–≤–∞—Ä–∞–º–∏**: –£–¥–æ–±–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ –≥—Ä—É–ø–ø–∞–º.
*   **–ö–æ–Ω—Ç—Ä–æ–ª—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ü–µ–Ω –Ω–∞ —Ç–æ–≤–∞—Ä—ã.
*   **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π GUI –≤ —á–∞—Ç–µ**: –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.
*   **Discord –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–¥–æ–≤ –≤ –§–æ—Ä—É–º-–∫–∞–Ω–∞–ª–µ Discord.
    *   –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω.
    *   –û—Ç–¥–µ–ª—å–Ω—ã–π —Ç—Ä–µ–¥ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
    *   –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ Embed-—Å–æ–æ–±—â–µ–Ω–∏–π.
    *   –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ Rate Limit'–∞–º Discord API.
*   **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤ (`ru`, `en`).
*   **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–º–≤–æ–ª –≤–∞–ª—é—Ç—ã, —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –¥–∏–∑–∞–π–Ω.
*   **SQLite –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ù–∞–¥–µ–∂–Ω–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1.  –°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–ª–∏–∑ `.jar` —Ñ–∞–π–ª–∞.
2.  –ü–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ –ø–∞–ø–∫—É `plugins` –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.
3.  **(–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [DiscordSRV](https://github.com/DiscordSRV/DiscordSRV) –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Discord.
4.  –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `plugins/MinimalPrice/config.yml`.

```yaml
# –Ø–∑—ã–∫ —Å–æ–æ–±—â–µ–Ω–∏–π: ru (Russian) –∏–ª–∏ en (English)
language: ru

# –°–∏–º–≤–æ–ª –≤–∞–ª—é—Ç—ã, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ —á–∞—Ç–µ –∏ Discord
currency: '$'

# ID –§–æ—Ä—É–º-–∫–∞–Ω–∞–ª–∞ –≤ Discord –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω
# –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ Discord, –Ω–∞–∂–º–∏—Ç–µ –ü–ö–ú –Ω–∞ –∫–∞–Ω–∞–ª -> –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID
discord_forum_channel_id: "123456789012345678"
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Discord –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–≥–∏–Ω **DiscordSRV** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –≤–∞—à–µ–º—É –±–æ—Ç—É.
2.  –°–æ–∑–¥–∞–π—Ç–µ **Forum Channel (–ö–∞–Ω–∞–ª-—Ñ–æ—Ä—É–º)** –≤ –≤–∞—à–µ–º Discord —Å–µ—Ä–≤–µ—Ä–µ.
3.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **ID –∫–∞–Ω–∞–ª–∞** (–ü–ö–ú -> Copy ID).
4.  –í—Å—Ç–∞–≤—å—Ç–µ ID –≤ –ø–æ–ª–µ `discord_forum_channel_id` –≤ `config.yml`.
5.  –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–ª–∞–≥–∏–Ω (`/minimal reload`).
6.  –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–µ (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–º) –ø–æ—Å—Ç—ã –∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏.

> **–í–∞–∂–Ω–æ**: –ë–æ—Ç—É —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ `Manage Threads` (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ç–∫–∞–º–∏) –∏ `Send Messages` (–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π) –≤ —ç—Ç–æ–º –∫–∞–Ω–∞–ª–µ.

## üìú –ö–æ–º–∞–Ω–¥—ã –∏ –ü—Ä–∞–≤–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∞–≤–æ |
| :--- | :--- | :--- |
| `/minimal view` | –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π. | `minimalprice.view` |
| `/minimal create category <name>` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é. | `minimalprice.admin` |
| `/minimal add price <cat> <item> <price>` | –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä —Å —Ü–µ–Ω–æ–π –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é. | `minimalprice.admin` |
| `/minimal set category <old> <new>` | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é. | `minimalprice.admin` |
| `/minimal set goods <old> <new>` | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä (–≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö). | `minimalprice.admin` |
| `/minimal set price <cat> <item> <price>` | –ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞. | `minimalprice.admin` |
| `/minimal reload` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –∏ —è–∑—ã–∫–∏. | `minimalprice.admin` |

*–ê–ª–∏–∞—Å—ã: `/price`, `/mp`*

---

## üë®‚Äçüíª –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (Developer Guide)

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∂–µ–ª–∞—é—â–∏—Ö –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç!

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (Prerequisites)

*   **Java 21** (–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞).
*   **Gradle 8.5+** (–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Gradle Wrapper –≤ –ø—Ä–æ–µ–∫—Ç–µ).

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞ (Architecture)

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É **Package by Feature** (–ü–∞–∫–µ—Ç –ø–æ –§–∏—á–µ), —á—Ç–æ–±—ã –∫–æ–¥ –æ—Å—Ç–∞–≤–∞–ª—Å—è –º–æ–¥—É–ª—å–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º.

*   `ru.minimalprice.minimalprice`
    *   `configuration`: –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å `config.yml` –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π (`messages_*.yml`).
    *   `database`: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º SQLite –∏ –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (`HikariCP`).
    *   `features`
        *   `price`: –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ü–µ–Ω.
            *   `models`: POJO –∫–ª–∞—Å—Å—ã `Category`, `Product`.
            *   `storage`: `PriceRepository` (SQL –∑–∞–ø—Ä–æ—Å—ã).
            *   `events`: –ö–∞—Å—Ç–æ–º–Ω—ã–µ Bukkit Events (`CategoryCreateEvent`, `ProductUpdateEvent` –∏ –¥—Ä.), –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏.
        *   `discord`: –ú–æ–¥—É–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Discord.
            *   `storage`: `DiscordRepository` (–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç ID —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–¥–æ–≤ –≤ –ë–î).
            *   `DiscordManager`: –°–ª—É—à–∞–µ—Ç –∏–≤–µ–Ω—Ç—ã –∏–∑ –ø–∞–∫–µ—Ç–∞ `price` –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á.
            *   `DiscordRestUtil`: –ö–ª–∞—Å—Å-—É—Ç–∏–ª–∏—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `java.net.http.HttpClient` –¥–ª—è –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Discord API (v10). –†–µ–∞–ª–∏–∑—É–µ—Ç –ª–æ–≥–∏–∫—É **Retry-After** –¥–ª—è –æ–±—Ö–æ–¥–∞ Rate Limit'–æ–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –§–æ—Ä—É–º–∞–º–∏.

### –°–±–æ—Ä–∫–∞ –ü—Ä–æ–µ–∫—Ç–∞

1.  –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
2.  –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ IDE (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è IntelliJ IDEA).
3.  –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å–±–æ—Ä–∫–∏:

```bash
./gradlew build
```

–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `.jar` —Ñ–∞–π–ª –ø–æ—è–≤–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `build/libs/`.

### –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥ (Contribution)

1.  –°–¥–µ–ª–∞–π—Ç–µ **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
2.  –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –≤–∞—à–µ–π —Ñ–∏—á–∏ (`git checkout -b feature/cool-new-feature`).
3.  –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏—Ö.
4.  –ó–∞–ø—É—à—å—Ç–µ –≤–µ—Ç–∫—É –≤ –≤–∞—à —Ñ–æ—Ä–∫ (`git push origin feature/cool-new-feature`).
5.  –û—Ç–∫—Ä–æ–π—Ç–µ **Pull Request** –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   **Paper API 1.21.10**: –û—Å–Ω–æ–≤–∞ –ø–ª–∞–≥–∏–Ω–∞.
*   **DiscordSRV**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞, —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö.
*   **Java HTTP Client**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º Discord Forums (—Ç–∞–∫ –∫–∞–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π JDA –≤ DiscordSRV –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –≤–µ—Ä—Å–∏–∏).
*   **HikariCP**: –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
*   **Gson**: –ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Discord API.

---
---

# MinimalPrice (English Version)

**MinimalPrice** is an advanced and reliable solution for economy management on modern Minecraft servers. In the context of constantly evolving in-game economies, it is critical for administrators to have tools to prevent dumping and resource devaluation. Our plugin provides these administrative capabilities in a convenient format.

You can easily categorize items, set strict minimum price thresholds, and manage everything through a user-friendly GUI directly in the game chat. No more complex commands for regular players ‚Äî just intuitive clickable menus.

However, the real "killer feature" is our **deep integration with Discord**. Unlike simple bots, MinimalPrice leverages the full power of Discord Forum Channels. The plugin automatically creates separate discussion threads for each item category, publishes beautifully formatted price lists, and, most importantly, synchronizes any in-game changes in real-time. If you change the price of a diamond in-game, it instantly updates in Discord, ensuring your players always have access to up-to-date information, even when offline. We've also taken care of the technical details: spam protection, Discord API Rate Limit handling, and automatic cleanup of outdated data make the plugin's operation completely transparent and stable.

## ‚ú® Features

*   **Category and Item Management**: Organize items into groups efficiently.
*   **Minimum Price Control**: Set and track fixed prices for items.
*   **Interactive Chat GUI**: Clickable lists of categories and items for easy navigation without using inventory GUIs.
*   **Discord Integration**: Automatically creates and updates threads in a Discord Forum Channel.
    *   Instant synchronization on price changes.
    *   Separate thread for each category.
    *   Beautifully formatted Embed messages.
    *   Resilient to Discord API Rate Limits.
*   **Localization**: Full support for Russian and English languages (`ru`, `en`).
*   **Customization**: Change currency symbols, message formats, and design.
*   **SQLite Database**: Reliable local data storage.

## üöÄ Installation

1.  Download the latest release `.jar` file.
2.  Place it in your server's `plugins` folder.
3.  **(Recommended)** Install [DiscordSRV](https://github.com/DiscordSRV/DiscordSRV) for Discord integration.
4.  Restart the server.

## ‚öôÔ∏è Configuration

The main config is located at `plugins/MinimalPrice/config.yml`.

```yaml
# Message language: ru (Russian) or en (English)
language: ru

# Currency symbol displayed in chat and Discord
currency: '$'

# Discord Forum Channel ID for price synchronization
# Enable Developer Mode in Discord, right-click the channel -> Copy ID
discord_forum_channel_id: "123456789012345678"
```

### Discord Integration Setup

1.  Ensure **DiscordSRV** is installed and connected to your bot.
2.  Create a **Forum Channel** in your Discord server.
3.  Copy the **Channel ID** (Right-click -> Copy ID).
4.  Paste the ID into `discord_forum_channel_id` in `config.yml`.
5.  Reload the plugin (`/minimal reload`).
6.  The bot will automatically delete old posts (created by itself) and create new, up-to-date lists.

> **Important**: The bot requires `Manage Threads` and `Send Messages` permissions in this channel.

## üìú Commands and Permissions

| Command | Description | Permission |
| :--- | :--- | :--- |
| `/minimal view` | Open the interactive category list. | `minimalprice.view` |
| `/minimal create category <name>` | Create a new category. | `minimalprice.admin` |
| `/minimal add price <cat> <item> <price>` | Add an item with a price to a category. | `minimalprice.admin` |
| `/minimal set category <old> <new>` | Rename a category. | `minimalprice.admin` |
| `/minimal set goods <old> <new>` | Rename an item (across all categories). | `minimalprice.admin` |
| `/minimal set price <cat> <item> <price>` | Change item price. | `minimalprice.admin` |
| `/minimal reload` | Reload config and languages. | `minimalprice.admin` |

*Aliases: `/price`, `/mp`*

---

## üë®‚Äçüíª Developer Guide

We welcome developers who want to contribute to the project!

### Prerequisites

*   **Java 21** (Required for building and running).
*   **Gradle 8.5+** (The project uses Gradle Wrapper).

### Architecture

The project follows the **Package by Feature** architecture to keep code modular and understandable.

*   `ru.minimalprice.minimalprice`
    *   `configuration`: Logic for `config.yml` and loading localizations (`messages_*.yml`).
    *   `database`: managing SQLite connection and connection pool (`HikariCP`).
    *   `features`
        *   `price`: Core price logic.
            *   `models`: POJO classes `Category`, `Product`.
            *   `storage`: `PriceRepository` (SQL queries).
            *   `events`: Custom Bukkit Events (`CategoryCreateEvent`, `ProductUpdateEvent`, etc.) that other modules can listen to.
        *   `discord`: Discord synchronization module.
            *   `storage`: `DiscordRepository` (Tracks threads created in DB).
            *   `DiscordManager`: Listens to events from the `price` package and manages the task queue.
            *   `DiscordRestUtil`: Utility class using `java.net.http.HttpClient` for direct requests to Discord API (v10). Implements **Retry-After** logic to handle Rate Limits for Forums.

### Building the Project

1.  Clone the repository.
2.  Open the project in an IDE (IntelliJ IDEA recommended).
3.  Run the build command:

```bash
./gradlew build
```

The compiled `.jar` file will appear in the `build/libs/` directory.

### How to Contribute

1.  **Fork** the repository.
2.  Create a branch for your feature (`git checkout -b feature/cool-new-feature`).
3.  Commit your changes.
4.  Push the branch to your fork (`git push origin feature/cool-new-feature`).
5.  Open a **Pull Request** to the main repository.

### Key Technologies

*   **Paper API 1.21.10**: Plugin foundation.
*   **DiscordSRV**: Used for bot authorization to avoid duplicating tokens in configs.
*   **Java HTTP Client**: Used for Discord Forums functionality (as the bundled JDA in DiscordSRV might be outdated).
*   **HikariCP**: Database connection pool for high performance.
*   **Gson**: Parsing JSON responses from the Discord API.
